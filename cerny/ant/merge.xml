<?xml version="1.0" encoding="UTF-8"?>



<!--

Filename    : merge.xml

Author      : Robert Cerny

Created     : 2007-11-17

Last Change : 2007-12-11



This Ant build script provides tasks related to merging resources in a

web application.



These tasks depend on one property:

* cerny.js.configuration - the location of the configuration file for Cerny.js

-->



<!DOCTYPE project [

<!ENTITY % cernyjs SYSTEM "dtd/cerny.js.dtd">

%cernyjs;



<!ENTITY mergecss SYSTEM "../js/ant/mergecss.js">

<!ENTITY mergecatalog SYSTEM "../js/ant/mergecatalog.js">

<!ENTITY mergejs SYSTEM "../js/ant/mergejs.js">

]>

<project name="cernyjs-merge" basedir=".">



  <dirname property="cernyjs-merge.basedir" file="${ant.file.cernyjs-merge}"/>

  <property name="cerny.js.dir" location="${cernyjs-merge.basedir}/.." />



  <!-- Merge a CSS file. Includes all imported CSS scripts in the src file.



       src-file - the source CSS file, which contains import directives.

       dest-file - the destination file.                                         -->

  <scriptdef name="merge-css" language="javascript">

    <attribute name="src-file"/>

    <attribute name="dest-file"/>

    &bootstrap;

    &mergecss;

  </scriptdef>



  <!-- Merge a catalog file. Includes all included catalogs.



       src-file - the source catalog file, which contains includes.

       dest-file - the destination file.                                         -->

  <scriptdef name="merge-catalog" language="javascript">

    <attribute name="src-file"/>

    <attribute name="dest-file"/>

    &bootstrap;

    &mergecatalog;

  </scriptdef>



  <!-- Merge JavaScript files. Resolve dependencies for an expression.



       expression - the expression to resolve dependencies for.

       dest-file - the destination file.

       catalog-file - the catalog file

       base-dir - the base directory                                        -->

  <scriptdef name="merge-js" language="javascript">

    <attribute name="expression" />

    <attribute name="dest-file" />

    <attribute name="catalog-file" />

    <attribute name="base-dir" />

    &bootstrap;

    &mergejs;

  </scriptdef>



</project>

