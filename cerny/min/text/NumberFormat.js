// (c) 2006-2008 Robert Cerny
CERNY.require("CERNY.text.NumberFormat","CERNY.util");(function(){var signature=CERNY.signature;var escapeStrForRegexp=CERNY.util.escapeStrForRegexp;CERNY.text.NumberFormat=NumberFormat;function NumberFormat(){var self=CERNY.object();self.separators={grouping:"",decimal:","};self.digits={grouping:null,fraction:null};self.init=init;self.parse=parse;return self;};signature(NumberFormat,"object");function init(){var r="";if(!this.digits.grouping){r="\\d+";}else{rFirstGroup="\\d{1,"+this.digits.grouping+"}";rOtherGroups="\\d{"+this.digits.grouping+"}";r=rFirstGroup+"("+escapeStrForRegexp(this.separators.grouping)+rOtherGroups+")*";}
var decimalSeparator=escapeStrForRegexp(this.separators.decimal);if(!this.digits.fraction){r=r+"("+decimalSeparator+"\\d*)?";}else{r=r+decimalSeparator+"\\d{"+this.digits.fraction+"}";}
this.regexp=new RegExp("^[+-]?"+r+"$");};function parse(numStr,_type){_type=(_type=="Float"||_type=="Int")?_type:"Float";var num=numStr;if(this.separators.grouping!=""){var regexp=escapeStrForRegexp(this.separators.grouping);num=num.replace(new RegExp(regexp,"g"),"");}
var regexp=escapeStrForRegexp(this.separators.decimal);num=num.replace(new RegExp(regexp),".");var func="parse"+_type;return eval(func)(num);};signature(parse,"number","string","string");NumberFormat.DE=NumberFormat();NumberFormat.DE.separators={grouping:"",decimal:","};NumberFormat.DE.init();NumberFormat.DE1=NumberFormat();NumberFormat.DE1.separators={grouping:".",decimal:","};NumberFormat.DE1.digits={grouping:3,fraction:2};NumberFormat.DE1.init();NumberFormat.DE2=NumberFormat();NumberFormat.DE2.separators={grouping:".",decimal:","};NumberFormat.DE2.digits={grouping:null,fraction:2};NumberFormat.DE2.init();})();